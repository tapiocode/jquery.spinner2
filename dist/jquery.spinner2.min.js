!function(a){var b={step:1,initvalue:0,minvalue:0,maxvalue:100,maxlength:2},c={up:38,down:40};a.fn.spinner=function(d){return this.each(function(){function e(a){n.val(j()+l.step*a),f(n)}function f(a){clearTimeout(m.data("timeout"));var b=g(a);null!==b&&n.trigger("update",[a,b])}function g(a){var b=j(),c=h(b);if(a.toggleClass("invalid",c).toggleClass("passive",!i(b)).siblings(".neg").attr("disabled",b===l.minvalue?"disabled":null).siblings(".pos").attr("disabled",b===l.maxvalue?"disabled":null),c){var d=setTimeout(function(){n.val(m.data("lastValidValue")),g(a)},500);return m.data("timeout",d),null}return m.data("lastValidValue",b),b}function h(a){return isNaN(+a)||!i(a)}function i(a){return a>=l.minvalue&&a<=l.maxvalue}function j(a){return a=a||n,parseInt(a.val()||0,10)}function k(b){var c=b>0,d=["stepper",c?"pos":"neg"],f=a("<button>").addClass(d.join(" ")).html(c?"+":"-").click(function(){e(c?1:-1)});return f}var l=a.extend({},b,d||{},a(this).data()||{}),m=a("<div>").addClass("spinner").data("lastValidValue",l.initvalue),n=a(this).addClass("value").val(l.initvalue).bind("keyup paste change",function(b){var d=a(this);b.keyCode===c.up?e(1):b.keyCode===c.down?e(-1):j(d)!==m.data("lastValidValue")&&f(d)});n.wrap(m).before(k(-1)).after(k(1)),n.val(l.initvalue),n.attr("maxlength",l.maxlength),g(n)})}}(jQuery);