!function(a){var b={step:1,initvalue:0,minvalue:0,maxvalue:100,maxlength:3},c={up:38,down:40};a.fn.spinner=function(d){return this.each(function(){function e(a){o.val(k()+m.step*a),f(o)}function f(a){clearTimeout(n.data("timeout"));var b=g(a);null!==b&&o.trigger("update",[a,b])}function g(a){var b=k(),c=h(b);if(a.toggleClass("invalid",c).toggleClass("passive",i(b)).siblings(".neg").attr("disabled",b===m.minvalue?"disabled":null).siblings(".pos").attr("disabled",b===m.maxvalue?"disabled":null),c){var d=setTimeout(function(){o.val(n.data("lastValidValue")),g(a)},500);return n.data("timeout",d),null}return n.data("lastValidValue",b),b}function h(a){return isNaN(+a)||!j(a)}function i(a){return a===m.minvalue||a===m.maxvalue}function j(a){return a>=m.minvalue&&a<=m.maxvalue}function k(a){return a=a||o,parseInt(a.val()||0,10)}function l(b){var c=b>0,d=["stepper",c?"pos":"neg"],f=a("<button>").addClass(d.join(" ")).html(c?"+":"-").click(function(){e(c?1:-1)});return f}var m=a.extend({},b,d||{},a(this).data()||{}),n=a("<div>").addClass("spinner").data("lastValidValue",m.initvalue),o=a(this).addClass("value").val(m.initvalue).bind("keyup paste change",function(b){var d=a(this);b.keyCode===c.up?e(1):b.keyCode===c.down?e(-1):k(d)!==n.data("lastValidValue")&&f(d)});o.wrap(n).before(l(-1)).after(l(1)),o.val(m.initvalue),o.attr("maxlength",m.maxlength),g(o)})}}(jQuery);