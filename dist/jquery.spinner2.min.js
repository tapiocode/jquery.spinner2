!function(a){var b={value:0,min:0},c={up:38,down:40};a.fn.spinner=function(d){return this.each(function(){function e(a){var b=m.data("step")||1;m.val(i()+b*a),f(m)}function f(a){clearTimeout(l.data("timeout"));var b=g(a);null!==b&&m.trigger("update",[a,b])}function g(a){var b=i(),c=h(b);if(a.toggleClass("invalid",c).toggleClass("passive",0===b).siblings(".decrease").attr("disabled",b<=k.min?"disabled":null),c){var d=setTimeout(function(){m.val(l.data("lastValidValue")),g(a)},500);return l.data("timeout",d),null}return l.data("lastValidValue",b),b}function h(a){return isNaN(+a)||a<k.min}function i(a){return a=a||m,parseInt(a.val()||0,10)}function j(b){var c=b>0,d=["stepper",c?"increase":"decrease"],f=a("<button>").addClass(d.join(" ")).html(c?"+":"-").click(function(){e(c?1:-1)});return f}var k=a.extend(b,d),l=a("<div>").addClass("spinner").data("lastValidValue",k.value),m=a(this).addClass("value").attr("maxlength","2").val(k.value).bind("keyup paste change",function(b){var d=a(this);b.keyCode===c.up?e.call(this,1):b.keyCode===c.down?e.call(this,-1):i(d)!==l.data("lastValidValue")&&f(d)});m.wrap(l).before(j(-1)).after(j(1)),m.val(m.data("initvalue")||0),g(m)})}}(jQuery);